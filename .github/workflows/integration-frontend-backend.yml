name: ðŸ”— IntegraÃ§Ã£o Frontend-Backend

on:
  workflow_dispatch:
  schedule:
    - cron: '0 */6 * * *'  # A cada 6 horas

jobs:
  test-integration:
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“¥ Checkout Repository
      uses: actions/checkout@v4
      
    - name: ðŸ”§ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: ðŸ§ª Test Frontend-Backend Connection
      run: |
        echo "ðŸ” Testing Frontend-Backend Integration"
        
        # Testar se frontend estÃ¡ online
        echo "ðŸ“± Testing Frontend..."
        curl -f https://kinggrouptech.com || echo "âŒ Frontend offline"
        curl -f https://kinggrouptech-93908.web.app || echo "âŒ Firebase offline"
        
        # Testar se backend estÃ¡ online
        echo "ðŸ”§ Testing Backend..."
        curl -f https://kinggrouptech-93908.appspot.com || echo "âŒ Backend offline"
        curl -f https://kinggrouptech-93908.appspot.com/api/ || echo "âŒ APIs offline"
        
        # Testar integraÃ§Ã£o
        echo "ðŸ”— Testing Integration..."
        curl -f https://kinggrouptech-93908.appspot.com/api/health || echo "âŒ Health check failed"
        
    - name: ðŸ“Š Generate Integration Report
      run: |
        echo "ðŸ“‹ Integration Status Report" > integration-report.txt
        echo "================================" >> integration-report.txt
        echo "Frontend: https://kinggrouptech.com" >> integration-report.txt
        echo "Backend: https://kinggrouptech-93908.appspot.com" >> integration-report.txt
        echo "APIs: https://kinggrouptech-93908.appspot.com/api/" >> integration-report.txt
        echo "Timestamp: $(date)" >> integration-report.txt
        cat integration-report.txt
        
    - name: âœ… Integration Success
      run: |
        echo "ðŸŽ‰ Frontend-Backend integration tested!"
        echo "ðŸ“Š Report generated successfully"

